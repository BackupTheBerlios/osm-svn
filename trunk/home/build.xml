<?xml version="1.0" encoding="UTF-8" ?>

<project name="osm-home" default="install" basedir="." 
    xmlns:transit="antlib:net.dpml.transit"
    xmlns:x="dpml:depot" >

  <transit:import uri="local:template:dpml/tools/standard"/>

  <target name="init" depends="standard.init">
    <filter token="JAVA-PRODUCT-VERSION" value="1.4"/>
    <filter token="JAVA-DOWNLOAD-URL" value="http://java.sun.com/j2se/1.4.2/download.html"/>
    <x:filter token="ANT-PRODUCT-VERSION" feature="version" ref="ant"/>
    <x:filter token="TRANSIT-PRODUCT-VERSION" feature="version" ref="dpml/transit"/>
    <x:filter token="METRO-RUNTIME-URI" feature="uri" type="part" ref="dpml/metro/dpml-metro-runtime" />
    <x:filter token="DEPOT-PRODUCT-VERSION" feature="version" ref="dpml/depot"/>
    <x:filter token="METRO-PRODUCT-VERSION" feature="version" ref="dpml/metro"/>
  </target>

  <target name="prepare" depends="standard.prepare">
  
    <property name="001.src.dir" location="${basedir}/../tutorial/components/001"/>
    <property name="local.001.docs.dir" location="target/docs/training/components/001"/>
    <mkdir dir="${local.001.docs.dir}"/>
    <copy toDir="${local.001.docs.dir}" flatten="true">
      <fileset dir="${001.src.dir}/target/reports/src">
        <include name="**/*.html"/>
      </fileset>
    </copy>

    <property name="002.src.dir" location="${basedir}/../tutorial/components/002"/>
    <property name="local.002.docs.dir" location="target/docs/training/components/002"/>
    <mkdir dir="${local.002.docs.dir}"/>
    <copy toDir="${local.002.docs.dir}" flatten="true">
      <fileset dir="${002.src.dir}/target/reports/src">
        <include name="**/*.html"/>
      </fileset>
    </copy>
    
    <property name="003.src.dir" location="${basedir}/../tutorial/components/003"/>
    <property name="local.003.docs.dir" location="target/docs/training/components/003"/>
    <mkdir dir="${local.003.docs.dir}"/>
    <copy toDir="${local.003.docs.dir}" flatten="true">
      <fileset dir="${003.src.dir}/target/reports/src">
        <include name="**/*.html"/>
      </fileset>
    </copy>
    
    <property name="101.src.dir" location="${basedir}/../tutorial/components/101"/>
    <property name="local.101.docs.dir" location="target/docs/training/components/context/101"/>
    <mkdir dir="${local.101.docs.dir}"/>
    <copy toDir="${local.101.docs.dir}" flatten="true">
      <fileset dir="${101.src.dir}/target/reports/src">
        <include name="**/*.html"/>
      </fileset>
    </copy>
    <property name="102.src.dir" location="${basedir}/../tutorial/components/102"/>
    <property name="local.102.docs.dir" location="target/docs/training/components/context/102"/>
    <mkdir dir="${local.102.docs.dir}"/>
    <copy toDir="${local.102.docs.dir}" flatten="true">
      <fileset dir="${102.src.dir}/target/reports/src">
        <include name="**/*.html"/>
      </fileset>
    </copy>
    <property name="103.src.dir" location="${basedir}/../tutorial/components/103"/>
    <property name="local.103.docs.dir" location="target/docs/training/components/context/103"/>
    <mkdir dir="${local.103.docs.dir}"/>
    <copy toDir="${local.103.docs.dir}" flatten="true">
      <fileset dir="${103.src.dir}/target/reports/src">
        <include name="**/*.html"/>
      </fileset>
    </copy>
  </target>

  <target name="build" depends="standard.build">
    <x:docs/>
    <copy file="${basedir}/etc/docs/styles/style.css" toFile="${basedir}/target/docs/styles/style.css" overwrite="true"/>
  </target>

</project>

